# Story 2.3: Study Planner Board Type

## Status
Done

## Story
**As a** user,
**I want** a pre-configured Study Planner board,
**so that** I can plan my weekly study sessions by day.

## Acceptance Criteria

| # | Critério |
|---|----------|
| AC1 | Board tipo "Study Planner" cria 10 colunas automaticamente |
| AC2 | Colunas: Planejamento, Seg, Ter, Qua, Qui, Sex, Sáb, Dom, Finalizado, Favoritos |
| AC3 | Colunas de dias têm largura menor (160px vs 280px) |
| AC4 | Usuário pode customizar colunas após criação |
| AC5 | Tasks novas vão para "Planejamento" por default |
| AC6 | Drag-and-drop funciona identicamente ao Kanban |
| AC7 | Scroll horizontal smooth para navegar entre colunas |

## Tasks / Subtasks

- [x] Task 1: Verificar template Study Planner (AC1, AC2)
  - [x] Confirmar BOARD_TEMPLATES['study-planner'] existe
  - [x] Confirmar 10 colunas no template
  - [x] Testar criação de board Study Planner
- [x] Task 2: Implementar larguras dinâmicas de coluna (AC3)
  - [x] Criar função getColumnWidth(board, columnTitle)
  - [x] Planejamento e Finalizado: 220px
  - [x] Dias da semana (Seg-Dom): 160px
  - [x] Favoritos: 120px
  - [x] Kanban default: 280px
- [x] Task 3: Atualizar Column component (AC3)
  - [x] Receber width como prop ou calcular internamente
  - [x] Aplicar largura dinâmica via style ou class
- [x] Task 4: Atualizar Board component (AC3, AC7)
  - [x] Passar board type para Column
  - [x] Garantir scroll horizontal smooth
  - [x] scroll-behavior: smooth no container
- [x] Task 5: Configurar coluna default para novas tasks (AC5)
  - [x] Ao criar task, usar primeira coluna por default
  - [x] Para Study Planner, é "Planejamento"
  - [x] Verificar que botão "+ Add task" existe em todas colunas
- [x] Task 6: Verificar customização de colunas (AC4)
  - [x] Renomear colunas funciona
  - [x] Adicionar/remover colunas funciona
  - [x] Reordenar colunas funciona
- [x] Task 7: Testar drag-and-drop (AC6)
  - [x] Mover tasks entre colunas de dias
  - [x] Mover tasks para Finalizado
  - [x] Reordenar dentro de cada coluna

## Dev Notes

### Column Width Logic (de PRD)
```typescript
// src/utils/columnWidth.ts ou no Board.tsx
export const getColumnWidth = (board: Board, columnTitle: string): number => {
  if (board.type === 'study-planner') {
    if (['Planejamento', 'Finalizado'].includes(columnTitle)) return 220;
    if (columnTitle === 'Favoritos') return 120;
    return 160; // Dias da semana
  }
  return 280; // Kanban default
};
```

### Study Planner Template
```typescript
'study-planner': {
  type: 'study-planner',
  name: 'Study Planner',
  columns: [
    'Planejamento',  // 220px - onde links são coletados
    'Seg',           // 160px
    'Ter',           // 160px
    'Qua',           // 160px
    'Qui',           // 160px
    'Sex',           // 160px
    'Sab',           // 160px
    'Dom',           // 160px
    'Finalizado',    // 220px - estudos completos
    'Favoritos',     // 120px - para revisitar depois
  ],
}
```

### Column Component Update
```typescript
interface ColumnProps {
  column: Column;
  tasks: Task[];
  boardType: Board['type'];
}

export const Column = ({ column, tasks, boardType }: ColumnProps) => {
  const width = getColumnWidth({ type: boardType } as Board, column.title);

  return (
    <div
      style={{ width: `${width}px` }}
      className="flex-shrink-0 bg-gray-100 rounded-lg"
    >
      {/* ... */}
    </div>
  );
};
```

### Smooth Scroll CSS
```css
.board-container {
  @apply overflow-x-auto;
  scroll-behavior: smooth;
  -webkit-overflow-scrolling: touch; /* iOS smooth scroll */
}
```

### Testing
- Study Planner cria com 10 colunas corretas
- Colunas de dias são mais estreitas
- Scroll horizontal funciona suavemente
- Todas as funcionalidades de Kanban funcionam

## Definition of Done
- [x] Study Planner cria com 10 colunas corretas
- [x] Colunas de dias são mais estreitas
- [x] Scroll horizontal funciona suavemente
- [x] Todas as funcionalidades de Kanban funcionam

## Story Points
3

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-01-31 | 0.1 | Story criada a partir do PRD | River (SM) |

---

## Dev Agent Record

### Agent Model Used
Claude Opus 4.5 (claude-opus-4-5-20251101) via Dex Dev Agent

### Debug Log References
N/A - Implementation completed without errors

### Completion Notes List
1. Verified study-planner template exists in `src/constants/boardTemplates.ts` with 10 columns
2. Created `getColumnWidth` utility function at `src/utils/columnWidth.ts`
3. Updated Column component to receive `boardType` prop and calculate dynamic width
4. Updated Board component to pass `boardType` to Column components
5. Added smooth scroll behavior to board container with `scrollBehavior: 'smooth'` and iOS touch scrolling support
6. Existing Kanban features (drag-and-drop, add task, column customization) work with Study Planner

### File List
| File | Action | Description |
|------|--------|-------------|
| `src/utils/columnWidth.ts` | Created | New utility function `getColumnWidth(boardType, columnTitle)` |
| `src/components/Board/Column.tsx` | Modified | Added `boardType` prop, dynamic width calculation, removed hardcoded w-[280px] |
| `src/components/Board/Board.tsx` | Modified | Passes `boardType` to Column, added smooth scroll styling |
| `docs/stories/2.3-study-planner-board-type.md` | Modified | Updated status to Done, marked tasks complete |

---

## QA Results
*To be filled by QA agent*
