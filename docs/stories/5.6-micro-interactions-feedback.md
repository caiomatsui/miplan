# Story 5.6: Micro-interactions & Feedback

## Story Info
- **Epic:** [Epic 5 - Professional UI/UX Polish](./epic-5-professional-ui-polish.md)
- **Points:** 8
- **Priority:** P2 (Delight Layer)
- **Dependencies:** Stories 5.1-5.5

## User Story

**As a** user interacting with Miplan,
**I want** responsive, delightful feedback for my actions,
**So that** the app feels alive, responsive, and enjoyable to use.

## Background

Current state:
- Basic animations exist (fade-in, slide)
- Button presses lack tactile feedback
- Success/error states are functional but not delightful
- Loading states may be missing or basic
- Drag and drop has basic visual feedback

Target state (reference: Linear, Stripe):
- Every interaction has appropriate feedback
- Micro-animations add polish without delay
- Success celebrations are subtle but satisfying
- Loading states are elegant
- Motion respects user preferences

## Acceptance Criteria

### AC1: Button Micro-interactions
- [ ] Press: Scale down slightly (0.97-0.98)
- [ ] Release: Spring back animation
- [ ] Loading: Subtle pulse or spinner
- [ ] Success: Brief green flash or checkmark
- [ ] Disabled: No interaction feedback, muted style

### AC2: Task Interactions
- [ ] Create: Card appears with subtle pop animation
- [ ] Complete: Satisfying checkmark animation
- [ ] Delete: Card shrinks/fades out
- [ ] Drag start: Card lifts with shadow
- [ ] Drop: Card settles with slight bounce

### AC3: Form Feedback
- [ ] Input focus: Border color transition
- [ ] Valid input: Subtle green indicator
- [ ] Invalid input: Shake animation + red border
- [ ] Submit success: Brief success state
- [ ] Submit error: Shake + error message

### AC4: Loading States
- [ ] Skeleton loaders for initial content
- [ ] Subtle shimmer animation on skeletons
- [ ] Spinner for actions (small, themed)
- [ ] Progress indicator for longer operations
- [ ] Optimistic updates where appropriate

### AC5: Toast/Notification Polish
- [ ] Slide-in animation from bottom
- [ ] Success: Green accent with check icon
- [ ] Error: Red accent with X icon
- [ ] Info: Blue accent with info icon
- [ ] Auto-dismiss with progress indicator
- [ ] Hover pauses auto-dismiss

### AC6: Motion Preferences
- [ ] Respect `prefers-reduced-motion`
- [ ] Reduced: Instant transitions, no animations
- [ ] Still provide visual state changes
- [ ] Test with motion preference enabled

### AC7: Hover Tooltips (Enhancement)
- [ ] Keyboard shortcuts shown on hover
- [ ] Subtle fade-in (150ms delay)
- [ ] Positioned to avoid clipping
- [ ] Styled consistently with theme

## Technical Implementation

### File Changes
| File | Changes |
|------|---------|
| `src/index.css` | Animation tokens, keyframes |
| `src/components/ui/Button.tsx` | Press feedback |
| `src/components/Task/TaskCard.tsx` | Task animations |
| `src/components/ui/Toast.tsx` | Toast polish |
| `src/components/ui/Input.tsx` | Input feedback |

### Animation Tokens
```css
:root {
  /* Timing functions */
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --ease-smooth: cubic-bezier(0.4, 0, 0.2, 1);
  --ease-out: cubic-bezier(0, 0, 0.2, 1);
  --ease-in: cubic-bezier(0.4, 0, 1, 1);

  /* Durations */
  --duration-instant: 50ms;
  --duration-fast: 150ms;
  --duration-normal: 200ms;
  --duration-slow: 300ms;
  --duration-slower: 500ms;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

### Keyframe Animations
```css
@keyframes press {
  0% { transform: scale(1); }
  50% { transform: scale(0.97); }
  100% { transform: scale(1); }
}

@keyframes success-pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20%, 60% { transform: translateX(-4px); }
  40%, 80% { transform: translateX(4px); }
}

@keyframes shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
```

### Button with Press Feedback
```tsx
<button
  className={cn(
    "transition-transform duration-100",
    "active:scale-[0.97]",
    isLoading && "animate-pulse pointer-events-none"
  )}
>
  {children}
</button>
```

## Testing Requirements

- [ ] Test all button interactions
- [ ] Test task create/delete animations
- [ ] Test form validation feedback
- [ ] Test toast animations
- [ ] Test with `prefers-reduced-motion`
- [ ] Verify 60fps performance
- [ ] No animation jank or flicker

## Definition of Done

- [ ] Button press feedback implemented
- [ ] Task card animations polished
- [ ] Form feedback responsive
- [ ] Loading states elegant
- [ ] Toasts slide smoothly
- [ ] Reduced motion respected
- [ ] Performance verified

---

*Agent: @dev*
*Created: 2026-01-31*
