# Story 8.3: Delete Confirmation Modal Blocks Background

## Status: Ready for Review

## Description
When the "Delete Task" confirmation modal is open, users should not be able to interact with elements behind it. The backdrop should block all pointer events.

## Current Behavior
The AlertDialog (via Radix UI) should already block interactions, but user reports suggest elements behind it are still clickable.

## Acceptance Criteria
- [ ] When delete confirmation is open, cannot click tasks behind it
- [ ] When delete confirmation is open, cannot click column headers
- [ ] When delete confirmation is open, cannot click sidebar items
- [ ] Backdrop visually indicates it blocks interaction (existing styling)
- [ ] Cancel/Confirm buttons work correctly
- [ ] Escape key closes the dialog

## Technical Analysis

### Current Implementation
`ConfirmDialog.tsx` wraps `AlertDialog` from Radix UI:
```tsx
<AlertDialog open={isOpen} onOpenChange={(open) => !open && onCancel()}>
  <AlertDialogContent>
    ...
  </AlertDialogContent>
</AlertDialog>
```

### Radix AlertDialog Behavior
Radix AlertDialog should automatically:
- Trap focus within the dialog
- Block pointer events on content behind
- Handle escape key
- Handle click outside (though AlertDialog typically doesn't close on outside click)

### Possible Issues
1. Z-index conflict - something with higher z-index is above overlay
2. Missing modal attribute
3. Overlay not covering full viewport
4. Portal rendering issue

### Debug Steps
1. Inspect the AlertDialogOverlay in DevTools
2. Check if `pointer-events` is set correctly
3. Verify z-index stacking
4. Check if overlay covers full viewport

## Tasks
- [x] Reproduce the issue
- [x] Inspect AlertDialogOverlay in DevTools
- [x] Verify z-index (should be z-50)
- [x] Check pointer-events on overlay
- [x] Apply fix (likely CSS adjustment)
- [ ] Test that background is not clickable
- [ ] Test dialog still works (cancel, confirm, escape)

## Dev Agent Record

### Root Cause
The Sheet component and AlertDialog both used `z-50`, causing z-index conflicts when the delete confirmation appears over the task detail sheet.

### Fix Applied
Increased AlertDialog z-index from `z-50` to `z-[100]` for both:
- AlertDialogOverlay
- AlertDialogContent

This ensures the confirmation dialog always appears above other modals/sheets.

### File List
- `src/components/ui/alert-dialog.tsx` - Changed z-index to z-[100]

## File Changes
- `src/components/ui/alert-dialog.tsx` - CSS adjustments if needed
- Potentially `src/index.css` if global style override needed

## Technical Fix (If Needed)
If the overlay isn't blocking, ensure:
```tsx
<AlertDialogOverlay
  className={cn(
    "fixed inset-0 z-50 bg-black/70",
    // Ensure this is present:
    "pointer-events-auto"
  )}
/>
```

Or add to the overlay's parent to ensure it captures events:
```css
[data-radix-alert-dialog-overlay] {
  pointer-events: auto;
}
```

## Testing
1. Open a task detail sheet
2. Click "Delete Task" button
3. Confirmation modal appears
4. Try clicking on tasks in the background → should NOT work
5. Try clicking on sidebar → should NOT work
6. Click Cancel → modal closes, can interact normally
7. Repeat and click Confirm → task deletes, modal closes

## Story Points: 1
